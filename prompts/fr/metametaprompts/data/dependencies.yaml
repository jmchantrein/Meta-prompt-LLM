# Mapping des dépendances: quand X change, vérifier Y
# Utilisé par self-improver pour calculer le scope d'impact
#
# NOTICE: Ce fichier fait partie du projet Meta-prompt-LLM
# https://github.com/jmchantrein/Meta-prompt-LLM
# Voir AGENTS.md pour les règles complètes

version: "1.0.0"
last_updated: "2026-02-01T12:00:00Z"

# Dépendances des règles AGENTS.md
rules:
  rule-0:
    name: "honesty"
    description: "Droit à l'incertitude, jamais inventer"
    impacts:
      - pattern: "prompts/**/*.md"
        reason: "Tous les prompts doivent refléter l'honnêteté"

  rule-1:
    name: "state of the art and consensus"
    description: "Documentation et consensus"
    impacts:
      - pattern: "prompts/**/metaprompts/**/*.md"
        reason: "Les metaprompts définissent les pratiques"

  rule-2:
    name: "directed development"
    description: "Ordre de développement"
    impacts:
      - pattern: "prompts/**/metaprompts/**/*.md"
        reason: "Les metaprompts orchestrent le développement"

  rule-4:
    name: "DRY and KISS"
    description: "Source unique, simplicité"
    impacts:
      - pattern: ".ai/skills/*.yaml"
        reason: "Les skills sont la source unique"
      - pattern: "prompts/**/metaprompts/**/*.md"
        reason: "Metaprompts doivent respecter DRY/KISS"

  rule-8:
    name: "self-improvement"
    description: "Proposer améliorations"
    impacts:
      - pattern: "prompts/*/metametaprompts/**/*.md"
        reason: "Metametaprompts gèrent l'auto-amélioration"
      - pattern: ".ai/skills/self-improver.yaml"
        reason: "Skill principal d'auto-amélioration"

  rule-9:
    name: "checklist before commit"
    description: "Checklist pré-commit"
    impacts:
      - pattern: ".ai/skills/*.yaml"
        reason: "Skills de validation dans la checklist"
      - pattern: "prompts/*/metametaprompts/**/*.md"
        reason: "Metametaprompts orchestrent la validation"

  rule-10:
    name: "writing conventions and inclusivity"
    description: "Écriture inclusive et terminologie moderne"
    impacts:
      - pattern: "prompts/fr/**/*.md"
        reason: "Tout contenu FR doit être inclusif"
      - pattern: "docs/fr/**/*.md"
        reason: "Documentation FR inclusive"
      - pattern: "README.fr.md"
        reason: "README FR inclusif"
      - file: "prompts/en/metaprompts/hybrid-ai-bootstrap/hybrid-ai-bootstrap.md"
        reason: "Contient des références à l'inclusivité"
      - file: "prompts/en/metaprompts/hybrid-ai-takeover/hybrid-ai-takeover.md"
        reason: "Contient des références à l'inclusivité"

  rule-11:
    name: "persistent memory"
    description: "Mémoire persistante"
    impacts:
      - file: ".ai/MEMORY.md"
        reason: "Fichier de mémoire principal"
      - pattern: ".ai/skills/memory-keeper.yaml"
        reason: "Skill de gestion mémoire"

  rule-12:
    name: "language"
    description: "Langues EN/FR"
    impacts:
      - pattern: "prompts/**/*.md"
        reason: "Tous les prompts ont des versions bilingues"
      - pattern: "docs/**/*.md"
        reason: "Documentation bilingue"

  rule-15:
    name: "post-review actions"
    description: "Actions post-review"
    impacts:
      - pattern: ".ai/skills/*.yaml"
        reason: "Skills invoqués dans post-review"
      - file: ".ai/MEMORY.md"
        reason: "Mémoire mise à jour post-review"

# Dépendances des skills
skills:
  inclusivity-reviewer:
    description: "Vérifie écriture inclusive"
    impacts:
      - pattern: "prompts/fr/**/*.md"
        reason: "Tout contenu FR passe par ce reviewer"
      - pattern: "docs/fr/**/*.md"
        reason: "Documentation FR vérifiée"

  prompt-validator:
    description: "Valide structure des prompts"
    impacts:
      - pattern: "prompts/**/*.md"
        reason: "Tous les prompts sont validés"
      - file: "prompts/_TEMPLATE.md"
        reason: "Template de référence"

  translator:
    description: "Gère traduction EN/FR"
    impacts:
      - pattern: "prompts/**/*.md"
        reason: "Sync traductions prompts"
      - pattern: "docs/**/*.md"
        reason: "Sync traductions docs"

  link-checker:
    description: "Valide liens internes"
    impacts:
      - pattern: "**/*.md"
        reason: "Tous les markdown vérifiés"

  memory-keeper:
    description: "Gère mémoire persistante"
    impacts:
      - file: ".ai/MEMORY.md"
        reason: "Seul skill autorisé à modifier MEMORY.md"

  workflow-orchestrator:
    description: "Orchestre workflows"
    impacts:
      - pattern: ".ai/skills/*.yaml"
        reason: "Coordonne tous les skills"
      - file: "AGENTS.md"
        reason: "Génère depuis les skills"

  self-improver:
    description: "Auto-amélioration du projet"
    impacts:
      - pattern: "prompts/*/metametaprompts/**/*"
        reason: "Gère les données metametaprompts"
      - pattern: "prompts/**/*.md"
        reason: "Peut proposer des modifications aux prompts"

# Matrice de propagation rapide
# Quand un fichier change, quels prompts vérifier ?
propagation:
  "AGENTS.md":
    - "prompts/**/*.md"
  ".ai/skills/inclusivity-reviewer.yaml":
    - "prompts/fr/**/*.md"
  ".ai/skills/prompt-validator.yaml":
    - "prompts/**/*.md"
  ".ai/skills/translator.yaml":
    - "prompts/**/*.md"
    - "docs/**/*.md"
