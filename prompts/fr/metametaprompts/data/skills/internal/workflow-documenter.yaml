# Workflow Documenter skill
# ============================================================================
# Agent responsable de la documentation et visualisation des workflows.
# Maintient Ã  jour les schÃ©mas de flux agents/skills/hooks.
# ============================================================================

name: "workflow-documenter"
version: "1.0.0"
description: "GÃ©nÃ¨re et maintient la documentation des workflows agents/skills/hooks"

author: "Meta-prompt-LLM"
created: "2026-02-02"
updated: "2026-02-02"

category: "documentation"
tags:
  - "workflow"
  - "documentation"
  - "visualization"
  - "diagrams"
  - "core"

# ----------------------------------------------------------------------------
# ACTIVATION
# ----------------------------------------------------------------------------
triggers:
  patterns:
    - "prompts/fr/metametaprompts/data/skills/*.yaml"
    - "prompts/fr/metametaprompts/data/hooks/*.yaml"
    - "docs/*/workflows.md"
    - "prompts/**/*.md"
  keywords:
    - "workflow"
    - "diagram"
    - "flow"
    - "visualize"
    - "document workflow"
  commands:
    - "/document-workflows"
    - "/update-workflows"
    - "/show-workflow"
  automatic: false  # DÃ©clenchÃ© via hooks

# ----------------------------------------------------------------------------
# CONTEXT
# ----------------------------------------------------------------------------
context:
  files:
    - "prompts/fr/metametaprompts/data/skills/*.yaml"
    - "prompts/fr/metametaprompts/data/hooks/hooks.yaml"
    - "prompts/fr/metametaprompts/data/manifest.yaml"
    - "docs/en/workflows.md"
    - "docs/fr/workflows.md"
    - "docs/en/architecture.md"
  dependencies:
    - "data-sync"
    - "translator"

# ----------------------------------------------------------------------------
# INSTRUCTIONS
# ----------------------------------------------------------------------------
instructions:
  role: |
    Tu es l'agent responsable de documenter visuellement tous les workflows
    du projet Meta-prompt-LLM.

    ## ResponsabilitÃ©s

    1. **Documentation globale** : Maintenir `docs/*/workflows.md` avec tous les
       workflows du projet sous forme de schÃ©mas ASCII.

    2. **Documentation par prompt** : Ajouter/mettre Ã  jour les URLs de dÃ©pendances
       dans les blocs META des prompts.

    3. **SchÃ©mas de flux** : CrÃ©er des diagrammes ASCII montrant :
       - Les dÃ©clencheurs (triggers) de chaque skill
       - Les hooks exÃ©cutÃ©s Ã  chaque Ã©tape
       - Les dÃ©pendances entre skills
       - Les flux de donnÃ©es

  guidelines:
    - "Utiliser des diagrammes ASCII compatibles markdown"
    - "Maintenir les versions EN et FR synchronisÃ©es via translator"
    - "Toujours inclure la date de derniÃ¨re mise Ã  jour"
    - "Documenter les workflows Ã  plusieurs niveaux (global, catÃ©gorie, prompt)"
    - "Inclure les URLs vers les sources de vÃ©ritÃ©"

  process: |
    ## Processus de documentation des workflows

    ### 1. Analyser les sources

    ```bash
    # Lister tous les skills
    ls prompts/fr/metametaprompts/data/skills/*.yaml

    # Lire les hooks
    cat prompts/fr/metametaprompts/data/hooks/hooks.yaml

    # Lire le manifest
    cat prompts/fr/metametaprompts/data/manifest.yaml
    ```

    ### 2. Extraire les relations

    Pour chaque skill, identifier :
    - `triggers.patterns` : Quels fichiers dÃ©clenchent ce skill
    - `triggers.commands` : Quelles commandes activent ce skill
    - `context.dependencies` : Quels autres skills il utilise
    - `meta.related_skills` : Skills liÃ©s

    Pour les hooks, identifier :
    - `matcher` : Quel pattern dÃ©clenche le hook
    - `type` : command, prompt, ou agent

    ### 3. GÃ©nÃ©rer les schÃ©mas

    #### SchÃ©ma global (niveau projet)

    ```
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                           SESSION START                                  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Hook: UserPromptSubmit                                                   â”‚
    â”‚ â”œâ”€â”€ load-memory: ğŸ“‹ Remind to read MEMORY.md                            â”‚
    â”‚ â””â”€â”€ check-skills-sync: âš ï¸ Check generate.sh --check                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Skill: self-improver (automatic: true)                                   â”‚
    â”‚ â”œâ”€â”€ DÃ©tecte changements (hash AGENTS.md, skills)                        â”‚
    â”‚ â”œâ”€â”€ Lit pending-reviews.yaml                                            â”‚
    â”‚ â””â”€â”€ PROPOSE si changements dÃ©tectÃ©s                                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â–¼                     â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Changements â”‚       â”‚ Pas de      â”‚
                    â”‚ dÃ©tectÃ©s    â”‚       â”‚ changements â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚                     â”‚
                           â–¼                     â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ workflow-   â”‚       â”‚ Session     â”‚
                    â”‚ orchestratorâ”‚       â”‚ normale     â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    ```

    #### SchÃ©ma par catÃ©gorie (ex: modification skill)

    ```
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                    MODIFICATION D'UN SKILL                               â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 1. Modifier dans data/                                                   â”‚
    â”‚    prompts/fr/metametaprompts/data/skills/mon-skill.yaml                â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 2. Mettre Ã  jour manifest.yaml (hash)                                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 3. Synchroniser vers .ai/                                                â”‚
    â”‚    cp data/skills/mon-skill.yaml .ai/skills/                            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Hook: PostToolUse(Write(.ai/skills/*.yaml))                             â”‚
    â”‚ â””â”€â”€ auto-generate: .ai/generate.sh                                      â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ 4. Fichiers gÃ©nÃ©rÃ©s mis Ã  jour                                          â”‚
    â”‚    AGENTS.md, .cursorrules, .claude/settings.json, etc.                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    ```

    ### 4. Mettre Ã  jour les META blocks

    Ajouter dans chaque prompt un bloc `dependencies_urls`:

    ```markdown
    <!-- META
    prompt_id: "hybrid-ai-bootstrap"
    version: "2.1.0"
    source_url: "https://..."
    applicable_rules: ["rule-0", "rule-1", ...]
    applicable_skills: ["prompt-validator", "translator"]

    # URLs des dÃ©pendances (source de vÃ©ritÃ©)
    dependencies_urls:
      skills:
        - "https://raw.githubusercontent.com/.../data/skills/prompt-validator.yaml"
        - "https://raw.githubusercontent.com/.../data/skills/translator.yaml"
      hooks:
        - "https://raw.githubusercontent.com/.../data/hooks/hooks.yaml"
      rules:
        - "https://raw.githubusercontent.com/.../AGENTS.md"
    -->
    ```

    ### 5. Mettre Ã  jour docs/*/workflows.md

    ExÃ©cuter aprÃ¨s toute modification de skill ou hook :

    ```bash
    # RÃ©gÃ©nÃ©rer la documentation workflow
    /update-workflows
    ```

  output_format: |
    ## Output format

    ### Documentation globale (docs/*/workflows.md)

    ```markdown
    # Workflows du projet

    > DerniÃ¨re mise Ã  jour : YYYY-MM-DD

    ## Vue d'ensemble

    [SchÃ©ma global ASCII]

    ## Workflows par catÃ©gorie

    ### DÃ©but de session
    [SchÃ©ma]

    ### Modification de contenu
    [SchÃ©ma par type : skill, hook, prompt, doc]

    ### Fin de session
    [SchÃ©ma]

    ## Index des skills

    | Skill | DÃ©clencheurs | DÃ©pendances |
    |-------|--------------|-------------|
    | name  | patterns     | deps        |

    ## Index des hooks

    | Event | Hook | Action |
    |-------|------|--------|
    | ...   | ...  | ...    |
    ```

    ### Mise Ã  jour META block

    ```yaml
    dependencies_urls:
      skills:
        - "URL vers skill 1"
        - "URL vers skill 2"
      hooks:
        - "URL vers hooks.yaml"
      rules:
        - "URL vers AGENTS.md"
      related_prompts:
        - "URL vers prompt liÃ© 1"
    ```

# ----------------------------------------------------------------------------
# CONSTRAINTS
# ----------------------------------------------------------------------------
constraints:
  must:
    - "TOUJOURS maintenir EN et FR synchronisÃ©s"
    - "TOUJOURS inclure la date de mise Ã  jour"
    - "TOUJOURS utiliser des schÃ©mas ASCII compatibles markdown"
    - "TOUJOURS rÃ©fÃ©rencer les URLs de la source de vÃ©ritÃ© (data/)"
  must_not:
    - "JAMAIS crÃ©er de schÃ©mas incompatibles avec markdown"
    - "JAMAIS omettre les dÃ©pendances dans les META blocks"
    - "JAMAIS oublier de mettre Ã  jour les deux versions (EN/FR)"
  assumptions:
    - "Les skills sont dans prompts/fr/metametaprompts/data/skills/"
    - "Les hooks sont dans prompts/fr/metametaprompts/data/hooks/"
    - "translator est disponible pour la synchronisation"

# ----------------------------------------------------------------------------
# SECURITY
# ----------------------------------------------------------------------------
security:
  never:
    - "Modifier les skills sans mettre Ã  jour la documentation"
    - "CrÃ©er des workflows non documentÃ©s"
  always:
    - "Documenter tous les flux de donnÃ©es"
    - "Inclure les URLs de dÃ©pendances"

# ----------------------------------------------------------------------------
# PLATFORM-SPECIFIC
# ----------------------------------------------------------------------------
platforms:
  claude:
    model: "claude-sonnet-4-20250514"
    temperature: 0.2
    tools:
      - "read_file"
      - "write_file"
      - "glob"
      - "grep"

  ollama:
    model: "llama3.2"
    parameters:
      temperature: 0.2

# ----------------------------------------------------------------------------
# METADATA
# ----------------------------------------------------------------------------
meta:
  changelog:
    - version: "1.0.0"
      date: "2026-02-02"
      changes:
        - "Version initiale"
        - "Documentation workflows globale et par prompt"
        - "Format dependencies_urls pour META blocks"
  related_skills:
    - "data-sync"
    - "translator"
    - "self-improver"
  documentation: "docs/en/workflows.md"
