{
  "_comment": "Auto-generated by generate.sh from .ai/hooks/hooks.yaml",
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "timeout": 5,
            "command": "echo \"\"\necho \"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\"\necho \"â•‘              META-PROMPT-LLM - Platform Detection             â•‘\"\necho \"â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\"\necho \"\"\n\n# Detect platform based on environment variables and config files\nPLATFORM=\"unknown\"\nPLATFORM_LEVEL=\"?\"\nLIMITATIONS=\"\"\n\n# Claude Code detection\nif [ -n \"$CLAUDE_CODE_VERSION\" ] || [ -f \".claude/settings.json\" ]; then\n  PLATFORM=\"Claude Code\"\n  PLATFORM_LEVEL=\"â˜…â˜…â˜…â˜…â˜… Full\"\n  LIMITATIONS=\"Aucune - support complet (6 events + agent hooks)\"\n# Cursor detection\nelif [ -n \"$CURSOR_VERSION\" ] || [ -f \".cursor/hooks.json\" ]; then\n  PLATFORM=\"Cursor\"\n  PLATFORM_LEVEL=\"â˜…â˜…â˜…â˜…â˜† Good\"\n  LIMITATIONS=\"Pas de SessionStart, pas de hooks agent\"\n# OpenCode detection\nelif [ -n \"$OPENCODE_VERSION\" ] || [ -d \".opencode\" ]; then\n  PLATFORM=\"OpenCode\"\n  PLATFORM_LEVEL=\"â˜…â˜…â˜…â˜†â˜† Medium\"\n  LIMITATIONS=\"NÃ©cessite plugin oh-my-opencode pour hooks complets\"\n# Codex detection\nelif [ -n \"$CODEX_VERSION\" ] || [ -f \"codex.toml\" ]; then\n  PLATFORM=\"Codex CLI\"\n  PLATFORM_LEVEL=\"â˜…â˜…â˜†â˜†â˜† Basic\"\n  LIMITATIONS=\"Seul event: agent-turn-complete (notify)\"\n# Aider detection\nelif [ -n \"$AIDER_VERSION\" ] || [ -f \".aider.conf.yml\" ]; then\n  PLATFORM=\"Aider\"\n  PLATFORM_LEVEL=\"â˜…â˜†â˜†â˜†â˜† Minimal\"\n  LIMITATIONS=\"Pas de hooks, seulement auto_lint et test_cmd\"\n# Continue detection\nelif [ -n \"$CONTINUE_VERSION\" ] || [ -f \".continuerc.json\" ]; then\n  PLATFORM=\"Continue.dev\"\n  PLATFORM_LEVEL=\"â˜…â˜†â˜†â˜†â˜† Minimal\"\n  LIMITATIONS=\"Data events HTTP uniquement, pas de hooks commande\"\n# Fallback - try to detect from running process\nelif [ -n \"$TERM_PROGRAM\" ]; then\n  case \"$TERM_PROGRAM\" in\n    *cursor*|*Cursor*)\n      PLATFORM=\"Cursor\"\n      PLATFORM_LEVEL=\"â˜…â˜…â˜…â˜…â˜† Good\"\n      LIMITATIONS=\"Pas de SessionStart, pas de hooks agent\"\n      ;;\n    *)\n      PLATFORM=\"Terminal ($TERM_PROGRAM)\"\n      PLATFORM_LEVEL=\"? Unknown\"\n      LIMITATIONS=\"Plateforme non reconnue - fonctionnalitÃ©s limitÃ©es possibles\"\n      ;;\n  esac\nfi\n\necho \"ğŸ–¥ï¸  Plateforme dÃ©tectÃ©e: $PLATFORM\"\necho \"ğŸ“Š Niveau de support:   $PLATFORM_LEVEL\"\necho \"\"\n\nif [ \"$PLATFORM\" != \"Claude Code\" ]; then\n  echo \"âš ï¸  LIMITATIONS:\"\n  echo \"   $LIMITATIONS\"\n  echo \"\"\n  echo \"ğŸ’¡ Pour un support complet des hooks, utilisez Claude Code.\"\n  echo \"   https://claude.ai/code\"\nelse\n  echo \"âœ… Support complet des hooks activÃ©\"\nfi\n\necho \"\"\necho \"â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\"\necho \"\"\n"
          }
        ]
      },
      {
        "matcher": "startup",
        "hooks": [
          {
            "type": "command",
            "timeout": 30,
            "command": "echo \"ğŸ”§ [data-sync] VÃ©rification de synchronisation...\"\n\nDATA_DIR=\"prompts/fr/metametaprompts/data\"\nAI_DIR=\".ai\"\n\n# Check if data/ has changes not in .ai/\nif [ -d \"$DATA_DIR/skills\" ] && [ -d \"$AI_DIR/skills\" ]; then\n  DATA_HASH=$(find \"$DATA_DIR/skills\" -name \"*.yaml\" -exec cat {} \\; 2>/dev/null | md5sum | cut -d' ' -f1)\n  AI_HASH=$(find \"$AI_DIR/skills\" -name \"*.yaml\" -exec cat {} \\; 2>/dev/null | md5sum | cut -d' ' -f1)\n\n  if [ \"$DATA_HASH\" != \"$AI_HASH\" ]; then\n    echo \"âš ï¸ [data-sync] Changements dÃ©tectÃ©s dans data/, synchronisation nÃ©cessaire\"\n    echo \"   ExÃ©cutez: cp -r $DATA_DIR/skills/* $AI_DIR/skills/\"\n  else\n    echo \"âœ… [data-sync] Skills synchronisÃ©s\"\n  fi\nfi\n\n# Check hooks sync\nif [ -f \"$DATA_DIR/hooks/hooks.yaml\" ] && [ -f \"$AI_DIR/hooks/hooks.yaml\" ]; then\n  DATA_HOOKS_HASH=$(md5sum \"$DATA_DIR/hooks/hooks.yaml\" | cut -d' ' -f1)\n  AI_HOOKS_HASH=$(md5sum \"$AI_DIR/hooks/hooks.yaml\" | cut -d' ' -f1)\n\n  if [ \"$DATA_HOOKS_HASH\" != \"$AI_HOOKS_HASH\" ]; then\n    echo \"âš ï¸ [data-sync] hooks.yaml dÃ©synchronisÃ©, copie...\"\n    cp \"$DATA_DIR/hooks/hooks.yaml\" \"$AI_DIR/hooks/hooks.yaml\"\n    echo \"âœ… [data-sync] hooks.yaml synchronisÃ©\"\n  fi\nfi\n"
          }
        ]
      },
      {
        "matcher": "startup|resume",
        "hooks": [
          {
            "type": "command",
            "timeout": 60,
            "command": "echo \"ğŸ”§ [generate] VÃ©rification des fichiers gÃ©nÃ©rÃ©s...\"\n\nif [ -f \".ai/generate.sh\" ]; then\n  if ! .ai/generate.sh --check 2>/dev/null; then\n    echo \"âš ï¸ [generate] RÃ©gÃ©nÃ©ration nÃ©cessaire...\"\n    .ai/generate.sh 2>/dev/null && echo \"âœ… [generate] Fichiers rÃ©gÃ©nÃ©rÃ©s\" || echo \"âŒ [generate] Ã‰chec\"\n  else\n    echo \"âœ… [generate] Fichiers Ã  jour\"\n  fi\nfi\n"
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "command",
            "command": "echo \"ğŸ§  [memory-keeper] Chargement du contexte...\"\n\nif [ -f \".ai/MEMORY.md\" ]; then\n  echo \"\"\n  echo \"â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\"\n  echo \"                    CONTEXTE PROJET CHARGÃ‰\"\n  echo \"â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\"\n  cat \".ai/MEMORY.md\"\n  echo \"â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\"\n  echo \"\"\nelse\n  echo \"âš ï¸ [memory-keeper] Fichier .ai/MEMORY.md non trouvÃ©\"\nfi\n"
          }
        ]
      },
      {
        "matcher": "startup",
        "hooks": [
          {
            "type": "command",
            "timeout": 10,
            "command": "echo \"ğŸ”„ [self-improver] VÃ©rification des changements de rÃ¨gles...\"\n\n# Check AGENTS.md hash vs stored hash\nif [ -f \"AGENTS.md\" ] && [ -f \".ai/VERSION\" ]; then\n  CURRENT_HASH=$(md5sum AGENTS.md | cut -d' ' -f1)\n  STORED_INFO=$(cat .ai/VERSION)\n\n  # Simple check - if AGENTS.md changed since last generate\n  if ! echo \"$STORED_INFO\" | grep -q \"agents\"; then\n    echo \"â„¹ï¸ [self-improver] PremiÃ¨re session ou version mise Ã  jour\"\n  fi\nfi\n\necho \"âœ… [self-improver] VÃ©rification terminÃ©e\"\n"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "# Feedback visuel discret\necho \"ğŸ“‹ Session active | MÃ©moire: .ai/MEMORY.md\"\n"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "INPUT=$(cat)\nFILE_PATH=$(echo \"$INPUT\" | grep -o '\"file_path\"[[:space:]]*:[[:space:]]*\"[^\"]*\"' | sed 's/.*\"file_path\"[[:space:]]*:[[:space:]]*\"\\([^\"]*\\)\".*/\\1/')\n\nif echo \"$FILE_PATH\" | grep -qE '\\.env'; then\n  echo '{\"hookSpecificOutput\":{\"hookEventName\":\"PreToolUse\",\"permissionDecision\":\"ask\",\"permissionDecisionReason\":\"âš ï¸ Ã‰criture dans un fichier .env dÃ©tectÃ©e. Contient potentiellement des secrets.\"}}'\n  exit 0\nfi\nexit 0\n"
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "INPUT=$(cat)\nFILE_PATH=$(echo \"$INPUT\" | grep -o '\"file_path\"[[:space:]]*:[[:space:]]*\"[^\"]*\"' | sed 's/.*\"file_path\"[[:space:]]*:[[:space:]]*\"\\([^\"]*\\)\".*/\\1/')\n\nif echo \"$FILE_PATH\" | grep -qiE 'credential|secret|password|token|key\\.'; then\n  echo '{\"hookSpecificOutput\":{\"hookEventName\":\"PreToolUse\",\"permissionDecision\":\"ask\",\"permissionDecisionReason\":\"âš ï¸ Ã‰criture dans un fichier de credentials dÃ©tectÃ©e.\"}}'\n  exit 0\nfi\nexit 0\n"
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "INPUT=$(cat)\nCOMMAND=$(echo \"$INPUT\" | grep -o '\"command\"[[:space:]]*:[[:space:]]*\"[^\"]*\"' | sed 's/.*\"command\"[[:space:]]*:[[:space:]]*\"\\([^\"]*\\)\".*/\\1/')\n\n# Check for dangerous patterns\nif echo \"$COMMAND\" | grep -qE 'git (push.*--force|reset --hard|clean -[fd])'; then\n  echo '{\"hookSpecificOutput\":{\"hookEventName\":\"PreToolUse\",\"permissionDecision\":\"ask\",\"permissionDecisionReason\":\"âš ï¸ OpÃ©ration git destructive dÃ©tectÃ©e. Confirmer?\"}}'\n  exit 0\nfi\n\nif echo \"$COMMAND\" | grep -qE 'rm -rf'; then\n  echo '{\"hookSpecificOutput\":{\"hookEventName\":\"PreToolUse\",\"permissionDecision\":\"ask\",\"permissionDecisionReason\":\"âš ï¸ Suppression rÃ©cursive dÃ©tectÃ©e. Confirmer?\"}}'\n  exit 0\nfi\nexit 0\n"
          }
        ]
      },
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "INPUT=$(cat)\nFILE_PATH=$(echo \"$INPUT\" | grep -o '\"file_path\"[[:space:]]*:[[:space:]]*\"[^\"]*\"' | sed 's/.*\"file_path\"[[:space:]]*:[[:space:]]*\"\\([^\"]*\\)\".*/\\1/')\n\n# Check if editing .ai/ directly (should edit data/ instead)\nif echo \"$FILE_PATH\" | grep -qE '^\\.ai/(skills|hooks)/'; then\n  echo '{\"hookSpecificOutput\":{\"hookEventName\":\"PreToolUse\",\"permissionDecision\":\"ask\",\"permissionDecisionReason\":\"âš ï¸ Modification directe de .ai/ dÃ©tectÃ©e. PrÃ©fÃ©rez modifier data/ (source de vÃ©ritÃ©).\"}}'\n  exit 0\nfi\nexit 0\n"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "INPUT=$(cat)\nFILE_PATH=$(echo \"$INPUT\" | grep -o '\"file_path\"[[:space:]]*:[[:space:]]*\"[^\"]*\"' | sed 's/.*\"file_path\"[[:space:]]*:[[:space:]]*\"\\([^\"]*\\)\".*/\\1/')\n\nif echo \"$FILE_PATH\" | grep -qE '(data/skills|\\.ai/skills)/.*\\.yaml$'; then\n  echo \"ğŸ“¦ [generate] Skill modifiÃ©, rÃ©gÃ©nÃ©ration...\"\n  .ai/generate.sh 2>/dev/null && echo \"âœ… [generate] RÃ©gÃ©nÃ©rÃ©\" || echo \"âŒ [generate] Ã‰chec\"\nfi\n"
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "INPUT=$(cat)\nFILE_PATH=$(echo \"$INPUT\" | grep -o '\"file_path\"[[:space:]]*:[[:space:]]*\"[^\"]*\"' | sed 's/.*\"file_path\"[[:space:]]*:[[:space:]]*\"\\([^\"]*\\)\".*/\\1/')\n\n# If data/hooks changed, sync to .ai/hooks\nif echo \"$FILE_PATH\" | grep -qE 'data/hooks/.*\\.yaml$'; then\n  echo \"ğŸ”§ [data-sync] Hooks modifiÃ©s, synchronisation...\"\n  cp \"prompts/fr/metametaprompts/data/hooks/hooks.yaml\" \".ai/hooks/hooks.yaml\" 2>/dev/null\n  echo \"âœ… [data-sync] Hooks synchronisÃ©s vers .ai/\"\nfi\n\n# If data/skills changed, sync to .ai/skills\nif echo \"$FILE_PATH\" | grep -qE 'data/skills/.*\\.yaml$'; then\n  SKILL_NAME=$(basename \"$FILE_PATH\")\n  echo \"ğŸ”§ [data-sync] Skill modifiÃ©: $SKILL_NAME\"\n  cp \"$FILE_PATH\" \".ai/skills/$SKILL_NAME\" 2>/dev/null\n  echo \"âœ… [data-sync] Skill synchronisÃ© vers .ai/\"\nfi\n"
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "INPUT=$(cat)\nFILE_PATH=$(echo \"$INPUT\" | grep -o '\"file_path\"[[:space:]]*:[[:space:]]*\"[^\"]*\"' | sed 's/.*\"file_path\"[[:space:]]*:[[:space:]]*\"\\([^\"]*\\)\".*/\\1/')\n\nif echo \"$FILE_PATH\" | grep -qE '/fr/.*\\.md$'; then\n  echo \"ğŸ” [inclusivity] Contenu FR modifiÃ©. Rappel: Ã©criture inclusive requise.\"\nfi\n"
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "INPUT=$(cat)\nFILE_PATH=$(echo \"$INPUT\" | grep -o '\"file_path\"[[:space:]]*:[[:space:]]*\"[^\"]*\"' | sed 's/.*\"file_path\"[[:space:]]*:[[:space:]]*\"[^\"]*\\)\".*/\\1/')\n\nif echo \"$FILE_PATH\" | grep -qE 'docs/en/.*\\.md$'; then\n  FR_PATH=$(echo \"$FILE_PATH\" | sed 's|docs/en/|docs/fr/|')\n  echo \"ğŸŒ [translator] Doc EN modifiÃ©. VÃ©rifier traduction FR: $FR_PATH\"\nfi\n"
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "agent",
            "timeout": 60,
            "prompt": "Tu es l'agent de vÃ©rification de consistance du projet Meta-prompt-LLM.\n\n## Contexte\n\nTu es appelÃ© Ã  la fin de chaque rÃ©ponse de Claude pour vÃ©rifier\nsi des actions de consistance sont nÃ©cessaires.\n\n## Ta mission\n\n1. Lis le transcript de la session via $ARGUMENTS\n2. DÃ©termine si cette session a impliquÃ©:\n   - Des dÃ©cisions techniques importantes\n   - Des modifications de rÃ¨gles ou skills\n   - Des leÃ§ons apprises\n   - Des changements de contexte projet\n\n3. Si OUI Ã  l'un de ces points:\n   - Retourne { \"ok\": false, \"reason\": \"ğŸ§  [memory-keeper] Mise Ã  jour de .ai/MEMORY.md recommandÃ©e: [rÃ©sumÃ© des changements]\" }\n\n4. Si NON (conversation simple, pas de dÃ©cision):\n   - Retourne { \"ok\": true }\n\n## CritÃ¨res de dÃ©cision\n\nMETTRE Ã€ JOUR MEMORY.MD si:\n- Nouvelle dÃ©cision technique prise\n- Nouveau skill crÃ©Ã© ou modifiÃ©\n- Nouvelle rÃ¨gle ou convention adoptÃ©e\n- ProblÃ¨me rÃ©solu qui constitue une leÃ§on\n- Changement de contexte projet\n\nNE PAS METTRE Ã€ JOUR si:\n- Simple question/rÃ©ponse\n- Lecture de fichiers sans modification\n- ExÃ©cution de commandes routiniÃ¨res\n- Correction de typos mineurs\n\n## Format de rÃ©ponse\n\nRetourne UNIQUEMENT un objet JSON:\n{ \"ok\": true }\nou\n{ \"ok\": false, \"reason\": \"ğŸ§  [memory-keeper] [description de ce qui doit Ãªtre ajoutÃ© Ã  MEMORY.md]\" }\n"
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "echo \"\"\necho \"â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\"\necho \"                    FIN DE SESSION\"\necho \"â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\"\necho \"ğŸ“ Si des dÃ©cisions importantes ont Ã©tÃ© prises,\"\necho \"   assurez-vous que .ai/MEMORY.md est Ã  jour.\"\necho \"\"\necho \"ğŸ”„ Pour la prochaine session:\"\necho \"   - SessionStart chargera automatiquement le contexte\"\necho \"   - data-sync vÃ©rifiera la synchronisation\"\necho \"â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\"\n"
          }
        ]
      }
    ]
  }
}
