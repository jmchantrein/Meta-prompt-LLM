{
  "_comment": "Auto-generated by generate.sh from .ai/hooks/hooks.yaml",
  "hooks": {
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "timeout": 5,
            "command": "echo \"\"\necho \"â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—\"\necho \"â•‘              META-PROMPT-LLM - Platform Detection             â•‘\"\necho \"â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\"\necho \"\"\n\n# Detect platform based on environment variables and config files\nPLATFORM=\"unknown\"\nPLATFORM_LEVEL=\"?\"\nLIMITATIONS=\"\"\n\n# Claude Code detection\nif [ -n \"$CLAUDE_CODE_VERSION\" ] || [ -f \".claude/settings.json\" ]; then\n  PLATFORM=\"Claude Code\"\n  PLATFORM_LEVEL=\"â˜…â˜…â˜…â˜…â˜… Full\"\n  LIMITATIONS=\"Aucune - support complet (6 events + agent hooks)\"\n# Cursor detection\nelif [ -n \"$CURSOR_VERSION\" ] || [ -f \".cursor/hooks.json\" ]; then\n  PLATFORM=\"Cursor\"\n  PLATFORM_LEVEL=\"â˜…â˜…â˜…â˜…â˜† Good\"\n  LIMITATIONS=\"Pas de SessionStart, pas de hooks agent\"\n# OpenCode detection\nelif [ -n \"$OPENCODE_VERSION\" ] || [ -d \".opencode\" ]; then\n  PLATFORM=\"OpenCode\"\n  PLATFORM_LEVEL=\"â˜…â˜…â˜…â˜†â˜† Medium\"\n  LIMITATIONS=\"NÃ©cessite plugin oh-my-opencode pour hooks complets\"\n# Codex detection\nelif [ -n \"$CODEX_VERSION\" ] || [ -f \"codex.toml\" ]; then\n  PLATFORM=\"Codex CLI\"\n  PLATFORM_LEVEL=\"â˜…â˜…â˜†â˜†â˜† Basic\"\n  LIMITATIONS=\"Seul event: agent-turn-complete (notify)\"\n# Aider detection\nelif [ -n \"$AIDER_VERSION\" ] || [ -f \".aider.conf.yml\" ]; then\n  PLATFORM=\"Aider\"\n  PLATFORM_LEVEL=\"â˜…â˜†â˜†â˜†â˜† Minimal\"\n  LIMITATIONS=\"Pas de hooks, seulement auto_lint et test_cmd\"\n# Continue detection\nelif [ -n \"$CONTINUE_VERSION\" ] || [ -f \".continuerc.json\" ]; then\n  PLATFORM=\"Continue.dev\"\n  PLATFORM_LEVEL=\"â˜…â˜†â˜†â˜†â˜† Minimal\"\n  LIMITATIONS=\"Data events HTTP uniquement, pas de hooks commande\"\n# Fallback - try to detect from running process\nelif [ -n \"$TERM_PROGRAM\" ]; then\n  case \"$TERM_PROGRAM\" in\n    *cursor*|*Cursor*)\n      PLATFORM=\"Cursor\"\n      PLATFORM_LEVEL=\"â˜…â˜…â˜…â˜…â˜† Good\"\n      LIMITATIONS=\"Pas de SessionStart, pas de hooks agent\"\n      ;;\n    *)\n      PLATFORM=\"Terminal ($TERM_PROGRAM)\"\n      PLATFORM_LEVEL=\"? Unknown\"\n      LIMITATIONS=\"Plateforme non reconnue - fonctionnalitÃ©s limitÃ©es possibles\"\n      ;;\n  esac\nfi\n\necho \"ğŸ–¥ï¸  Plateforme dÃ©tectÃ©e: $PLATFORM\"\necho \"ğŸ“Š Niveau de support:   $PLATFORM_LEVEL\"\necho \"\"\n\nif [ \"$PLATFORM\" != \"Claude Code\" ]; then\n  echo \"âš ï¸  LIMITATIONS:\"\n  echo \"   $LIMITATIONS\"\n  echo \"\"\n  echo \"ğŸ’¡ Pour un support complet des hooks, utilisez Claude Code.\"\n  echo \"   https://claude.ai/code\"\nelse\n  echo \"âœ… Support complet des hooks activÃ©\"\nfi\n\necho \"\"\necho \"â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€\"\necho \"\"\n"
          }
        ]
      },
      {
        "matcher": "startup",
        "hooks": [
          {
            "type": "command",
            "timeout": 30,
            "command": "echo \"ğŸ”§ [data-sync] VÃ©rification de synchronisation...\"\n\nDATA_DIR=\"prompts/fr/metametaprompts/data\"\nAI_DIR=\".ai\"\n\n# Check if data/ has changes not in .ai/\nif [ -d \"$DATA_DIR/skills\" ] && [ -d \"$AI_DIR/skills\" ]; then\n  DATA_HASH=$(find \"$DATA_DIR/skills\" -name \"*.yaml\" -exec cat {} \\; 2>/dev/null | md5sum | cut -d' ' -f1)\n  AI_HASH=$(find \"$AI_DIR/skills\" -name \"*.yaml\" -exec cat {} \\; 2>/dev/null | md5sum | cut -d' ' -f1)\n\n  if [ \"$DATA_HASH\" != \"$AI_HASH\" ]; then\n    echo \"âš ï¸ [data-sync] Changements dÃ©tectÃ©s dans data/, synchronisation nÃ©cessaire\"\n    echo \"   ExÃ©cutez: cp -r $DATA_DIR/skills/* $AI_DIR/skills/\"\n  else\n    echo \"âœ… [data-sync] Skills synchronisÃ©s\"\n  fi\nfi\n\n# Check hooks sync\nif [ -f \"$DATA_DIR/hooks/hooks.yaml\" ] && [ -f \"$AI_DIR/hooks/hooks.yaml\" ]; then\n  DATA_HOOKS_HASH=$(md5sum \"$DATA_DIR/hooks/hooks.yaml\" | cut -d' ' -f1)\n  AI_HOOKS_HASH=$(md5sum \"$AI_DIR/hooks/hooks.yaml\" | cut -d' ' -f1)\n\n  if [ \"$DATA_HOOKS_HASH\" != \"$AI_HOOKS_HASH\" ]; then\n    echo \"âš ï¸ [data-sync] hooks.yaml dÃ©synchronisÃ©, copie...\"\n    cp \"$DATA_DIR/hooks/hooks.yaml\" \"$AI_DIR/hooks/hooks.yaml\"\n    echo \"âœ… [data-sync] hooks.yaml synchronisÃ©\"\n  fi\nfi\n"
          }
        ]
      },
      {
        "matcher": "startup|resume",
        "hooks": [
          {
            "type": "command",
            "timeout": 60,
            "command": "echo \"ğŸ”§ [generate] VÃ©rification des fichiers gÃ©nÃ©rÃ©s...\"\n\nif [ -f \".ai/generate.sh\" ]; then\n  if ! .ai/generate.sh --check 2>/dev/null; then\n    echo \"âš ï¸ [generate] RÃ©gÃ©nÃ©ration nÃ©cessaire...\"\n    .ai/generate.sh 2>/dev/null && echo \"âœ… [generate] Fichiers rÃ©gÃ©nÃ©rÃ©s\" || echo \"âŒ [generate] Ã‰chec\"\n  else\n    echo \"âœ… [generate] Fichiers Ã  jour\"\n  fi\nfi\n"
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "command",
            "command": "echo \"ğŸ§  [memory-keeper] Chargement du contexte...\"\n\nif [ -f \".ai/MEMORY.md\" ]; then\n  echo \"\"\n  echo \"â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\"\n  echo \"                    CONTEXTE PROJET CHARGÃ‰\"\n  echo \"â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\"\n  cat \".ai/MEMORY.md\"\n  echo \"â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\"\n  echo \"\"\nelse\n  echo \"âš ï¸ [memory-keeper] Fichier .ai/MEMORY.md non trouvÃ©\"\nfi\n"
          }
        ]
      },
      {
        "matcher": "startup",
        "hooks": [
          {
            "type": "command",
            "timeout": 10,
            "command": "echo \"ğŸ”„ [self-improver] VÃ©rification des changements de rÃ¨gles...\"\n\n# Check AGENTS.md hash vs stored hash\nif [ -f \"AGENTS.md\" ] && [ -f \".ai/VERSION\" ]; then\n  CURRENT_HASH=$(md5sum AGENTS.md | cut -d' ' -f1)\n  STORED_INFO=$(cat .ai/VERSION)\n\n  # Simple check - if AGENTS.md changed since last generate\n  if ! echo \"$STORED_INFO\" | grep -q \"agents\"; then\n    echo \"â„¹ï¸ [self-improver] PremiÃ¨re session ou version mise Ã  jour\"\n  fi\nfi\n\necho \"âœ… [self-improver] VÃ©rification terminÃ©e\"\n"
          }
        ]
      },
      {
        "matcher": "startup",
        "hooks": [
          {
            "type": "command",
            "timeout": 15,
            "command": "echo \"ğŸ” [coherence-check] Analyse des relations skills/hooks...\"\n\nSKILLS_DIR=\".ai/skills\"\nHOOKS_FILE=\".ai/hooks/hooks.yaml\"\n\n# List all skills\nALL_SKILLS=\"\"\nfor f in \"$SKILLS_DIR\"/*.yaml; do\n  [ -f \"$f\" ] || continue\n  [ \"$(basename \"$f\")\" = \"_TEMPLATE.yaml\" ] && continue\n  skill=$(grep -m1 '^name:' \"$f\" | sed 's/name:[[:space:]]*\"\\?\\([^\"]*\\)\"\\?/\\1/')\n  [ -n \"$skill\" ] && ALL_SKILLS=\"$ALL_SKILLS $skill\"\ndone\n\n# Skills referenced in hooks (by name pattern)\nHOOKED_SKILLS=\"data-sync memory-keeper self-improver session-status inclusivity-reviewer translator\"\n\n# Find orphans\nORPHANS=\"\"\nfor skill in $ALL_SKILLS; do\n  is_hooked=false\n  for hooked in $HOOKED_SKILLS; do\n    [ \"$skill\" = \"$hooked\" ] && is_hooked=true && break\n  done\n  [ \"$is_hooked\" = false ] && ORPHANS=\"$ORPHANS $skill\"\ndone\n\nif [ -n \"$ORPHANS\" ]; then\n  echo \"ğŸ“‹ [coherence-check] Skills orphelins (invocables manuellement):\"\n  for orphan in $ORPHANS; do\n    echo \"   â””â”€â”€ $orphan\"\n  done\nelse\n  echo \"âœ… [coherence-check] Tous les skills sont liÃ©s Ã  des hooks\"\nfi\n\n# Check for potential loops (skills that might trigger hooks)\necho \"ğŸ”„ [coherence-check] Analyse des boucles potentielles...\"\nLOOP_RISKS=\"\"\n\n# Skills that write to data/ or .ai/ could trigger PostToolUse hooks\nfor skill in $ALL_SKILLS; do\n  skill_file=\"$SKILLS_DIR/${skill}.yaml\"\n  [ -f \"$skill_file\" ] || continue\n\n  # Check if skill mentions writing to data/ or .ai/\n  if grep -qE 'write|edit|modify|sync' \"$skill_file\" 2>/dev/null; then\n    if grep -qE 'data/|\\.ai/' \"$skill_file\" 2>/dev/null; then\n      LOOP_RISKS=\"$LOOP_RISKS $skill\"\n    fi\n  fi\ndone\n\nif [ -n \"$LOOP_RISKS\" ]; then\n  echo \"âš ï¸ [coherence-check] Skills avec risque de boucle (Ã©crivent dans data/.ai/):\"\n  for risk in $LOOP_RISKS; do\n    echo \"   â””â”€â”€ $risk â†’ PostToolUse:auto-sync/auto-generate\"\n  done\n  echo \"   Note: ProtÃ©gÃ© par PreToolUse guardrails\"\nelse\n  echo \"âœ… [coherence-check] Pas de risque de boucle dÃ©tectÃ©\"\nfi\n"
          }
        ]
      }
    ],
    "UserPromptSubmit": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "# Feedback visuel discret\necho \"ğŸ“‹ Session active | MÃ©moire: .ai/MEMORY.md\"\n"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "INPUT=$(cat)\nFILE_PATH=$(echo \"$INPUT\" | grep -o '\"file_path\"[[:space:]]*:[[:space:]]*\"[^\"]*\"' | sed 's/.*\"file_path\"[[:space:]]*:[[:space:]]*\"\\([^\"]*\\)\".*/\\1/')\n\nif echo \"$FILE_PATH\" | grep -qE '\\.env'; then\n  echo '{\"hookSpecificOutput\":{\"hookEventName\":\"PreToolUse\",\"permissionDecision\":\"ask\",\"permissionDecisionReason\":\"âš ï¸ Ã‰criture dans un fichier .env dÃ©tectÃ©e. Contient potentiellement des secrets.\"}}'\n  exit 0\nfi\nexit 0\n"
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "INPUT=$(cat)\nFILE_PATH=$(echo \"$INPUT\" | grep -o '\"file_path\"[[:space:]]*:[[:space:]]*\"[^\"]*\"' | sed 's/.*\"file_path\"[[:space:]]*:[[:space:]]*\"\\([^\"]*\\)\".*/\\1/')\n\nif echo \"$FILE_PATH\" | grep -qiE 'credential|secret|password|token|key\\.'; then\n  echo '{\"hookSpecificOutput\":{\"hookEventName\":\"PreToolUse\",\"permissionDecision\":\"ask\",\"permissionDecisionReason\":\"âš ï¸ Ã‰criture dans un fichier de credentials dÃ©tectÃ©e.\"}}'\n  exit 0\nfi\nexit 0\n"
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "INPUT=$(cat)\nCOMMAND=$(echo \"$INPUT\" | grep -o '\"command\"[[:space:]]*:[[:space:]]*\"[^\"]*\"' | sed 's/.*\"command\"[[:space:]]*:[[:space:]]*\"\\([^\"]*\\)\".*/\\1/')\n\n# Check for dangerous patterns\nif echo \"$COMMAND\" | grep -qE 'git (push.*--force|reset --hard|clean -[fd])'; then\n  echo '{\"hookSpecificOutput\":{\"hookEventName\":\"PreToolUse\",\"permissionDecision\":\"ask\",\"permissionDecisionReason\":\"âš ï¸ OpÃ©ration git destructive dÃ©tectÃ©e. Confirmer?\"}}'\n  exit 0\nfi\n\nif echo \"$COMMAND\" | grep -qE 'rm -rf'; then\n  echo '{\"hookSpecificOutput\":{\"hookEventName\":\"PreToolUse\",\"permissionDecision\":\"ask\",\"permissionDecisionReason\":\"âš ï¸ Suppression rÃ©cursive dÃ©tectÃ©e. Confirmer?\"}}'\n  exit 0\nfi\nexit 0\n"
          }
        ]
      },
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "INPUT=$(cat)\nFILE_PATH=$(echo \"$INPUT\" | grep -o '\"file_path\"[[:space:]]*:[[:space:]]*\"[^\"]*\"' | sed 's/.*\"file_path\"[[:space:]]*:[[:space:]]*\"\\([^\"]*\\)\".*/\\1/')\n\n# Check if editing .ai/ directly (should edit data/ instead)\nif echo \"$FILE_PATH\" | grep -qE '^\\.ai/(skills|hooks)/'; then\n  echo '{\"hookSpecificOutput\":{\"hookEventName\":\"PreToolUse\",\"permissionDecision\":\"ask\",\"permissionDecisionReason\":\"âš ï¸ Modification directe de .ai/ dÃ©tectÃ©e. PrÃ©fÃ©rez modifier data/ (source de vÃ©ritÃ©).\"}}'\n  exit 0\nfi\nexit 0\n"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "INPUT=$(cat)\nFILE_PATH=$(echo \"$INPUT\" | grep -o '\"file_path\"[[:space:]]*:[[:space:]]*\"[^\"]*\"' | sed 's/.*\"file_path\"[[:space:]]*:[[:space:]]*\"\\([^\"]*\\)\".*/\\1/')\n\nif echo \"$FILE_PATH\" | grep -qE '(data/skills|\\.ai/skills)/.*\\.yaml$'; then\n  echo \"ğŸ“¦ [generate] Skill modifiÃ©, rÃ©gÃ©nÃ©ration...\"\n  .ai/generate.sh 2>/dev/null && echo \"âœ… [generate] RÃ©gÃ©nÃ©rÃ©\" || echo \"âŒ [generate] Ã‰chec\"\nfi\n"
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "INPUT=$(cat)\nFILE_PATH=$(echo \"$INPUT\" | grep -o '\"file_path\"[[:space:]]*:[[:space:]]*\"[^\"]*\"' | sed 's/.*\"file_path\"[[:space:]]*:[[:space:]]*\"\\([^\"]*\\)\".*/\\1/')\n\n# If data/hooks changed, sync to .ai/hooks\nif echo \"$FILE_PATH\" | grep -qE 'data/hooks/.*\\.yaml$'; then\n  echo \"ğŸ”§ [data-sync] Hooks modifiÃ©s, synchronisation...\"\n  cp \"prompts/fr/metametaprompts/data/hooks/hooks.yaml\" \".ai/hooks/hooks.yaml\" 2>/dev/null\n  echo \"âœ… [data-sync] Hooks synchronisÃ©s vers .ai/\"\nfi\n\n# If data/skills changed, sync to .ai/skills\nif echo \"$FILE_PATH\" | grep -qE 'data/skills/.*\\.yaml$'; then\n  SKILL_NAME=$(basename \"$FILE_PATH\")\n  echo \"ğŸ”§ [data-sync] Skill modifiÃ©: $SKILL_NAME\"\n  cp \"$FILE_PATH\" \".ai/skills/$SKILL_NAME\" 2>/dev/null\n  echo \"âœ… [data-sync] Skill synchronisÃ© vers .ai/\"\nfi\n"
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "INPUT=$(cat)\nFILE_PATH=$(echo \"$INPUT\" | grep -o '\"file_path\"[[:space:]]*:[[:space:]]*\"[^\"]*\"' | sed 's/.*\"file_path\"[[:space:]]*:[[:space:]]*\"\\([^\"]*\\)\".*/\\1/')\n\nif echo \"$FILE_PATH\" | grep -qE '/fr/.*\\.md$'; then\n  echo \"ğŸ” [inclusivity-reviewer] Contenu FR modifiÃ©. Rappel: Ã©criture inclusive requise.\"\nfi\n"
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "INPUT=$(cat)\nFILE_PATH=$(echo \"$INPUT\" | grep -o '\"file_path\"[[:space:]]*:[[:space:]]*\"[^\"]*\"' | sed 's/.*\"file_path\"[[:space:]]*:[[:space:]]*\"[^\"]*\\)\".*/\\1/')\n\nif echo \"$FILE_PATH\" | grep -qE 'docs/en/.*\\.md$'; then\n  FR_PATH=$(echo \"$FILE_PATH\" | sed 's|docs/en/|docs/fr/|')\n  echo \"ğŸŒ [translator] Doc EN modifiÃ©. VÃ©rifier traduction FR: $FR_PATH\"\nfi\n"
          }
        ]
      },
      {
        "matcher": "Read",
        "hooks": [
          {
            "type": "command",
            "command": "INPUT=$(cat)\nFILE_PATH=$(echo \"$INPUT\" | grep -o '\"file_path\"[[:space:]]*:[[:space:]]*\"[^\"]*\"' | sed 's/.*\"file_path\"[[:space:]]*:[[:space:]]*\"\\([^\"]*\\)\".*/\\1/')\n\n# Determine context based on file path\ncase \"$FILE_PATH\" in\n  *MEMORY.md)\n    echo \"ğŸ§  [memory-keeper] Lecture mÃ©moire\"\n    ;;\n  *skills/*.yaml)\n    SKILL=$(basename \"$FILE_PATH\" .yaml)\n    echo \"ğŸ“¦ [skill:$SKILL] Lecture dÃ©finition\"\n    ;;\n  *hooks/*.yaml|*hooks.yaml)\n    echo \"ğŸ”§ [hooks-manager] Lecture hooks\"\n    ;;\n  *AGENTS.md|*CLAUDE.md)\n    echo \"ğŸ“‹ [config] Lecture configuration\"\n    ;;\n  */fr/*.md)\n    echo \"ğŸ” [inclusivity-reviewer] Lecture contenu FR\"\n    ;;\n  */en/*.md)\n    echo \"ğŸŒ [translator] Lecture contenu EN\"\n    ;;\nesac\n"
          }
        ]
      },
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "INPUT=$(cat)\nFILE_PATH=$(echo \"$INPUT\" | grep -o '\"file_path\"[[:space:]]*:[[:space:]]*\"[^\"]*\"' | sed 's/.*\"file_path\"[[:space:]]*:[[:space:]]*\"\\([^\"]*\\)\".*/\\1/')\n\ncase \"$FILE_PATH\" in\n  *MEMORY.md)\n    echo \"ğŸ§  [memory-keeper] Modification mÃ©moire\"\n    ;;\n  *skills/*.yaml)\n    SKILL=$(basename \"$FILE_PATH\" .yaml)\n    echo \"ğŸ“¦ [skill:$SKILL] Modification skill\"\n    ;;\n  *hooks/*.yaml|*hooks.yaml)\n    echo \"ğŸ”§ [hooks-manager] Modification hooks\"\n    ;;\nesac\n"
          }
        ]
      }
    ],
    "Stop": [
      {
        "hooks": [
          {
            "type": "command",
            "timeout": 15,
            "command": "# Session Status Summary - Generated by session-status skill\n# This provides visibility into the system's capabilities\n\necho \"\"\necho \"---\"\necho \"\"\necho \"## ğŸ“Š SYNTHÃˆSE SYSTÃˆME META-PROMPT-LLM\"\necho \"\"\n\nSKILLS_DIR=\".ai/skills\"\nHOOKED_SKILLS=\"data-sync memory-keeper self-improver session-status inclusivity-reviewer translator\"\n\n# Count skills\nSKILL_COUNT=$(find \"$SKILLS_DIR\" -name \"*.yaml\" ! -name \"_TEMPLATE.yaml\" 2>/dev/null | wc -l)\n\necho \"### ğŸ¯ Skills ($SKILL_COUNT)\"\necho \"\"\necho \"| Skill | Description | Hook |\"\necho \"|-------|-------------|------|\"\n\nif [ -d \"$SKILLS_DIR\" ]; then\n  for skill_file in \"$SKILLS_DIR\"/*.yaml; do\n    [ -f \"$skill_file\" ] || continue\n    [ \"$(basename \"$skill_file\")\" = \"_TEMPLATE.yaml\" ] && continue\n\n    skill_name=$(grep -m1 '^name:' \"$skill_file\" | sed 's/name:[[:space:]]*\"\\?\\([^\"]*\\)\"\\?/\\1/')\n    skill_desc=$(grep -m1 '^description:' \"$skill_file\" | sed 's/description:[[:space:]]*\"\\?\\([^\"]*\\)\"\\?/\\1/' | cut -c1-35)\n\n    # Check if hooked\n    is_hooked=\"âŒ\"\n    for h in $HOOKED_SKILLS; do\n      [ \"$skill_name\" = \"$h\" ] && is_hooked=\"âœ…\" && break\n    done\n\n    [ -n \"$skill_name\" ] && echo \"| \\`$skill_name\\` | $skill_desc | $is_hooked |\"\n  done\nfi\n\necho \"\"\necho \"### ğŸ”„ Hooks Lifecycle\"\necho \"\"\necho \"\\`\\`\\`\"\necho \"SessionStart â”€â”¬â”€ ğŸ“‹ platform-detect\"\necho \"              â”œâ”€ ğŸ”§ data-sync\"\necho \"              â”œâ”€ ğŸ”§ generate-check\"\necho \"              â”œâ”€ ğŸ§  load-memory\"\necho \"              â”œâ”€ ğŸ”„ self-improver\"\necho \"              â””â”€ ğŸ” coherence-check\"\necho \"      â†“\"\necho \"UserPromptSubmit â”€â”€ ğŸ“‹ context-reminder\"\necho \"      â†“\"\necho \"PreToolUse â”€â”€â”€â”€â”€ ğŸ›¡ï¸ guardrails (.env/secrets/git/rm)\"\necho \"      â†“\"\necho \"PostToolUse â”€â”€â”¬â”€ ğŸ“¦ auto-generate â†â”€â”€â”\"\necho \"              â”œâ”€ ğŸ”§ auto-sync    â†â”€â”€â”¤ loop risk\"\necho \"              â”œâ”€ ğŸ” inclusivity     â”‚ (protected)\"\necho \"              â””â”€ ğŸŒ translator      â”‚\"\necho \"      â†“                              â”‚\"\necho \"Stop â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€ ğŸ“Š session-status [CMD] â† FIRST\"\necho \"              â””â”€ âœ… consistency [AGENT]\"\necho \"      â†“\"\necho \"SessionEnd â”€â”€â”€â”€â”€ ğŸ“ final-reminder\"\necho \"\\`\\`\\`\"\necho \"\"\necho \"### ğŸ“‹ Commandes\"\necho \"\"\necho \"\\`\\`\\`bash\"\necho \".ai/generate.sh          # RÃ©gÃ©nÃ¨re tout\"\necho \".ai/generate.sh --check  # VÃ©rifie\"\necho \"cat .ai/MEMORY.md        # MÃ©moire\"\necho \"\\`\\`\\`\"\necho \"\"\necho \"**LÃ©gende**: Hook=âœ… (automatique) | Hook=âŒ (manuel)\"\necho \"\"\n"
          }
        ]
      },
      {
        "hooks": [
          {
            "type": "agent",
            "timeout": 60,
            "prompt": "Tu es l'agent de vÃ©rification de consistance du projet Meta-prompt-LLM.\n\n## Contexte\n\nTu es appelÃ© Ã  la fin de chaque rÃ©ponse de Claude pour vÃ©rifier\nsi des actions de consistance sont nÃ©cessaires.\n\n## Ta mission\n\n1. Lis le transcript de la session via $ARGUMENTS\n2. DÃ©termine si cette session a impliquÃ©:\n   - Des dÃ©cisions techniques importantes\n   - Des modifications de rÃ¨gles ou skills\n   - Des leÃ§ons apprises\n   - Des changements de contexte projet\n\n3. Si OUI Ã  l'un de ces points:\n   - Retourne { \"ok\": false, \"reason\": \"ğŸ§  [memory-keeper] Mise Ã  jour de .ai/MEMORY.md recommandÃ©e: [rÃ©sumÃ© des changements]\" }\n\n4. Si NON (conversation simple, pas de dÃ©cision):\n   - Retourne { \"ok\": true }\n\n## CritÃ¨res de dÃ©cision\n\nMETTRE Ã€ JOUR MEMORY.MD si:\n- Nouvelle dÃ©cision technique prise\n- Nouveau skill crÃ©Ã© ou modifiÃ©\n- Nouvelle rÃ¨gle ou convention adoptÃ©e\n- ProblÃ¨me rÃ©solu qui constitue une leÃ§on\n- Changement de contexte projet\n\nNE PAS METTRE Ã€ JOUR si:\n- Simple question/rÃ©ponse\n- Lecture de fichiers sans modification\n- ExÃ©cution de commandes routiniÃ¨res\n- Correction de typos mineurs\n\n## Format de rÃ©ponse\n\nRetourne UNIQUEMENT un objet JSON:\n{ \"ok\": true }\nou\n{ \"ok\": false, \"reason\": \"ğŸ§  [memory-keeper] [description de ce qui doit Ãªtre ajoutÃ© Ã  MEMORY.md]\" }\n"
          }
        ]
      }
    ],
    "SessionEnd": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "echo \"\"\necho \"â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\"\necho \"                    FIN DE SESSION\"\necho \"â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\"\necho \"ğŸ“ Si des dÃ©cisions importantes ont Ã©tÃ© prises,\"\necho \"   assurez-vous que .ai/MEMORY.md est Ã  jour.\"\necho \"\"\necho \"ğŸ”„ Pour la prochaine session:\"\necho \"   - SessionStart chargera automatiquement le contexte\"\necho \"   - data-sync vÃ©rifiera la synchronisation\"\necho \"â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\"\n"
          }
        ]
      }
    ]
  }
}
